<script src="https://cdn.jsdelivr.net/npm/keycloak-js@25.0.6/dist/keycloak.min.js"></script>

<script>
  // Create Keycloak instance
  const keycloak = new Keycloak({
    url: "https://securedev.virtuele.us",
    realm: "virtuele-dev",
    clientId: "web"
  });

  // Optional: expose globally
  window.keycloak = keycloak;

(async () => {
    const authenticated = await keycloak.init({
      onLoad: "check-sso",
      pkceMethod: "S256"
    });

    if (authenticated && window.opener) {
       send();
      }
    }

    
  })();

  function send() {
     fetch("https://localhost:8094/send", {
          method: "POST",
          headers: { "Content-Type": "text/plain" },
          body: "Hello from Page A"
        });
</script>
